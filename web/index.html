<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé± AI Î°úÎòê Î∂ÑÏÑùÍ∏∞ V2 - Deep Space</title>
    <!-- Tailwind CSS with CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'void-navy': '#0f172a',
                        'midnight-purple': '#2e1065',
                        'neon-cyan': '#06b6d4',
                        'vivid-pink': '#ec4899',
                        'amber-gold': '#f59e0b',
                    },
                    boxShadow: {
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.37)',
                        'glow-pink': '0 0 15px rgba(236, 72, 153, 0.5)',
                        'glow-cyan': '0 0 15px rgba(6, 182, 212, 0.5)',
                    },
                    fontFamily: {
                        'sans': ['Pretendard', 'Inter', 'ui-sans-serif', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <!-- ONNX Runtime Web -->
    <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.17.0/dist/ort.min.js"></script>
    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Inter:wght@400;600&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at 20% 20%, #2e1065 0%, #0f172a 70%);
            color: #e2e8f0;
            overflow-x: hidden;
        }

        h1,
        h2,
        h3,
        .heading-font {
            font-family: 'Outfit', sans-serif;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .glass-card {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .lotto-ball-v2 {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 16px;
            color: white;
            position: relative;
            box-shadow: inset -2px -2px 6px rgba(0, 0, 0, 0.4), inset 2px 2px 4px rgba(255, 255, 255, 0.3), 0 4px 8px rgba(0, 0, 0, 0.5);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* 3D Orb Colors */
        .ball-1-10 {
            background: radial-gradient(circle at 30% 30%, #fcd34d, #f59e0b);
        }

        .ball-11-20 {
            background: radial-gradient(circle at 30% 30%, #60a5fa, #2563eb);
        }

        .ball-21-30 {
            background: radial-gradient(circle at 30% 30%, #f87171, #dc2626);
        }

        .ball-31-40 {
            background: radial-gradient(circle at 30% 30%, gray, #4b5563);
        }

        .ball-41-45 {
            background: radial-gradient(circle at 30% 30%, #34d399, #059669);
        }

        .btn-glow-primary {
            background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
            box-shadow: 0 0 12px rgba(168, 85, 247, 0.4);
            transition: all 0.3s ease;
        }

        .btn-glow-primary:hover {
            box-shadow: 0 0 20px rgba(236, 72, 153, 0.6);
            transform: translateY(-1px);
        }

        /* Animations */
        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        .floating {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes pulse-glow {

            0%,
            100% {
                box-shadow: 0 0 15px rgba(168, 85, 247, 0.3);
            }

            50% {
                box-shadow: 0 0 30px rgba(168, 85, 247, 0.6);
            }
        }

        .pulsing-core {
            animation: pulse-glow 3s infinite;
        }

        .spinning {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }

        .pop-in {
            animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes pop {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Hide scrollbar for clean look */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>

<body class="min-h-screen text-gray-300 overflow-x-hidden bg-[#0f172a]">
    <!-- Background Gradient -->
    <div
        class="fixed inset-0 -z-10 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-blue-900/20 via-[#0f172a] to-[#0f172a]">
    </div>

    <!-- MAIN LAYOUT WRAPPER -->
    <div class="flex h-screen overflow-hidden">

        <!-- SIDEBAR (Desktop Only) -->
        <aside class="hidden md:flex w-64 flex-col bg-[#1e293b]/50 backdrop-blur-xl border-r border-white/5">
            <div class="p-6 pb-2 flex items-center gap-3">
                <div
                    class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg shadow-blue-500/20">
                    <span class="text-white text-lg">üß¨</span>
                </div>
                <h1 class="font-bold text-xl text-white tracking-tight">LottoQuant<span class="text-blue-400">AI</span>
                </h1>
            </div>

            <!-- LOTTERY SELECTOR (Desktop Sidebar) -->
            <div class="px-4 mb-6 mt-4">
                <div class="relative group">
                    <select id="lotterySelectDesktop" onchange="onLotteryChange(this.value)"
                        class="w-full bg-[#0f172a] border border-blue-500/30 text-white text-sm font-bold rounded-xl px-4 py-3 appearance-none cursor-pointer hover:border-blue-400 transition-colors focus:outline-none focus:ring-1 focus:ring-blue-500">
                        <option value="korea_645">üá∞üá∑ Korea Lotto 6/45</option>
                        <option value="usa_powerball">üá∫üá∏ USA Powerball</option>
                        <option value="usa_megamillions">üá∫üá∏ USA Mega Millions</option>
                        <option value="canada_649">üá®üá¶ Canada 6/49</option>
                    </select>
                    <span
                        class="absolute right-4 top-1/2 -translate-y-1/2 text-xs text-blue-400 pointer-events-none">‚ñº</span>
                </div>
            </div>

            <nav class="flex-1 px-4 py-2 space-y-2">
                <button onclick="switchTab('dashboard')" id="nav-dashboard"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-blue-600/10 text-blue-400 border border-blue-500/20 transition-all hover:bg-blue-600/20">
                    <span class="text-lg">üìä</span>
                    <span class="font-medium">Dashboard</span>
                </button>
                <button onclick="switchTab('history')" id="nav-history"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-400 hover:text-white hover:bg-white/5 transition-all">
                    <span class="text-lg">üìÇ</span>
                    <span class="font-medium">History Data</span>
                </button>
                <button onclick="switchTab('settings')" id="nav-settings"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-400 hover:text-white hover:bg-white/5 transition-all">
                    <span class="text-lg">‚öôÔ∏è</span>
                    <span class="font-medium">System</span>
                </button>
            </nav>

            <div class="p-4 border-t border-white/5">
                <div class="bg-black/20 rounded-xl p-4">
                    <div class="flex items-center gap-2 mb-2">
                        <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                        <span class="text-xs font-bold text-green-400 uppercase">System Online</span>
                    </div>
                    <div class="text-[10px] text-gray-500">
                        Engine: <span class="text-gray-300">v2.1.0 (ONNX)</span><br>
                        Agent: <span class="text-gray-300">Connected</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT AREA -->
        <div class="flex-1 flex flex-col h-full overflow-hidden relative">

            <!-- TOP HEADER (Mobile Only) -->
            <header
                class="md:hidden h-16 border-b border-white/5 bg-[#0f172a]/80 backdrop-blur-md flex items-center justify-between px-4 z-20">
                <!-- Mobile Logo -->
                <div class="flex items-center gap-2">
                    <div
                        class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center">
                        <span class="text-white">üß¨</span>
                    </div>
                </div>

                <!-- LOTTERY SELECTOR (Mobile) -->
                <div class="flex-1 flex justify-center px-4">
                    <div class="relative w-full max-w-[200px]">
                        <select id="lotterySelectMobile" onchange="onLotteryChange(this.value)"
                            class="w-full bg-[#1e293b] border border-blue-500/30 text-white text-sm font-bold rounded-xl px-4 py-2 appearance-none cursor-pointer focus:outline-none">
                            <option value="korea_645">üá∞üá∑ Korea Lotto</option>
                            <option value="usa_powerball">üá∫üá∏ Powerball</option>
                            <option value="usa_megamillions">üá∫üá∏ Mega Millions</option>
                            <option value="canada_649">üá®üá¶ Canada 649</option>
                        </select>
                        <span
                            class="absolute right-3 top-1/2 -translate-y-1/2 text-xs text-blue-400 pointer-events-none">‚ñº</span>
                    </div>
                </div>

                <!-- Right Actions -->
                <div class="flex items-center gap-3">
                    <button class="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center">üîî</button>
                </div>
            </header>

            <!-- SCROLLABLE CONTENT -->
            <main class="flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-8 pb-24 md:pb-8 scroll-smooth"
                id="main-scroll">

                <!-- DASHBOARD VIEW -->
                <div id="view-dashboard" class="space-y-6 max-w-[1600px] mx-auto">

                    <!-- TOP ROW: VISUALIZATIONS -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Chart 1: Hot Numbers (Bar Chart Style) -->
                        <div
                            class="glass-panel p-6 bg-[#1e293b]/50 border border-white/5 rounded-2xl h-64 flex flex-col relative overflow-hidden group">
                            <div class="flex justify-between items-start z-10">
                                <div>
                                    <h3 class="font-bold text-white text-sm tracking-wider flex items-center gap-2">
                                        <div class="w-1 h-4 bg-green-500 rounded-full"></div>
                                        HOT NUMBERS (LAST 50)
                                    </h3>
                                    <p class="text-[10px] text-gray-500 mt-1">Frequency distribution</p>
                                </div>
                                <span class="text-xs font-mono text-green-400 bg-green-900/20 px-2 py-1 rounded">Update:
                                    Live</span>
                            </div>
                            <!-- Bar Chart Visualization -->
                            <div id="hotNumbersChart" class="flex-1 flex items-end justify-between gap-1 mt-4 px-2">
                                <!-- Bars injected by JS -->
                                <div
                                    class="w-full h-full flex items-center justify-center text-xs text-gray-600 animate-pulse">
                                    Initializing Visualization...</div>
                            </div>
                            <!-- BG Decoration -->
                            <div
                                class="absolute top-0 right-0 w-32 h-32 bg-green-500/5 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none">
                            </div>
                        </div>

                        <!-- Chart 2: Sum Distribution (Gaussian Curve) -->
                        <div
                            class="glass-panel p-6 bg-[#1e293b]/50 border border-white/5 rounded-2xl h-64 flex flex-col relative overflow-hidden">
                            <div class="flex justify-between items-start z-10">
                                <div>
                                    <h3 class="font-bold text-white text-sm tracking-wider flex items-center gap-2">
                                        <div class="w-1 h-4 bg-purple-500 rounded-full"></div>
                                        SUM DISTRIBUTION THEORY
                                    </h3>
                                    <p class="text-[10px] text-gray-500 mt-1">Gaussian Normal Distribution</p>
                                </div>
                            </div>

                            <!-- Checkbox Filters (Overlay) -->
                            <div class="absolute top-6 right-6 z-20 flex gap-2">
                                <span
                                    class="text-[10px] text-gray-400 bg-black/20 px-2 py-1 rounded border border-white/5">100-175
                                    (Optimal)</span>
                            </div>

                            <!-- Curve Visualization (Canvas/SVG) -->
                            <div class="flex-1 mt-4 relative w-full flex items-end">
                                <!-- CSS-based Wave -->
                                <div class="absolute inset-0 flex items-end opacity-50">
                                    <div class="w-full h-32 bg-gradient-to-t from-purple-500/20 to-transparent"
                                        style="clip-path: polygon(0% 100%, 10% 80%, 30% 60%, 50% 90%, 70% 40%, 90% 70%, 100% 100%);">
                                    </div>
                                </div>
                                <svg class="w-full h-full" overflow="visible" preserveAspectRatio="none">
                                    <path
                                        d="M0,150 C50,140 100,100 150,110 S250,150 300,100 S400,0 600,80 L600,200 L0,200 Z"
                                        fill="url(#grad1)" fill-opacity="0.3" stroke="none" />
                                    <path d="M0,150 C50,140 100,100 150,110 S250,150 300,100 S400,0 600,80" fill="none"
                                        stroke="#a855f7" stroke-width="2" />
                                    <defs>
                                        <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
                                            <stop offset="0%" style="stop-color:#a855f7;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#1e1b4b;stop-opacity:0" />
                                        </linearGradient>
                                    </defs>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <!-- BOTTOM ROW: CONFIG (Left) & RESULTS (Right) -->
                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">

                        <!-- LEFT COL: CONFIGURATION (Span 4) -->
                        <div class="lg:col-span-5 xl:col-span-4 space-y-6">

                            <!-- 1. AI Analysis Engine (Unified 2x2 Grid) -->
                            <div class="mb-8">
                                <h3 class="text-lg font-bold text-white flex items-center gap-2 mb-4">
                                    <span class="text-pink-400 text-2xl">üß†</span>
                                    AI Analysis Engine
                                </h3>

                                <div class="grid grid-cols-2 gap-3">
                                    <!-- Card 1: Transformer -->
                                    <button onclick="selectModel('transformer'); playRipple(event)"
                                        id="card-transformer-v3"
                                        class="model-card p-4 rounded-xl bg-[#1e293b] border border-blue-500/30 hover:border-blue-500 hover:bg-blue-500/10 transition-all text-left flex flex-col justify-between h-36 group relative overflow-hidden">
                                        <div
                                            class="w-8 h-8 rounded bg-blue-500/20 text-blue-400 flex items-center justify-center text-lg mb-2">
                                            ‚öñÔ∏è</div>
                                        <div>
                                            <div class="font-bold text-white text-sm">Transformer</div>
                                            <div class="text-[10px] text-gray-500 leading-tight mt-1">Attention-based
                                                Pattern Recognition</div>
                                        </div>
                                        <div
                                            class="active-dot hidden absolute top-3 right-3 w-2 h-2 bg-blue-500 rounded-full shadow-glow-cyan">
                                        </div>
                                    </button>

                                    <!-- Card 2: LSTM -->
                                    <button onclick="selectModel('lstm'); playRipple(event)" id="card-lstm-v3"
                                        class="model-card p-4 rounded-xl bg-[#1e293b] border border-purple-500/30 hover:border-purple-500 hover:bg-purple-500/10 transition-all text-left flex flex-col justify-between h-36 group relative overflow-hidden">
                                        <div
                                            class="w-8 h-8 rounded bg-purple-500/20 text-purple-400 flex items-center justify-center text-lg mb-2">
                                            ‚ö°</div>
                                        <div>
                                            <div class="font-bold text-white text-sm">LSTM</div>
                                            <div class="text-[10px] text-gray-500 leading-tight mt-1">Sequential
                                                Time-Series Analysis</div>
                                        </div>
                                        <div
                                            class="active-dot hidden absolute top-3 right-3 w-2 h-2 bg-purple-500 rounded-full shadow-glow-purple">
                                        </div>
                                    </button>

                                    <!-- Card 3: Physics -->
                                    <button onclick="selectModel('vector'); playRipple(event)" id="card-physics-v3"
                                        class="model-card p-4 rounded-xl bg-[#1e293b] border border-green-500/30 hover:border-green-500 hover:bg-green-500/10 transition-all text-left flex flex-col justify-between h-36 group relative overflow-hidden">
                                        <div
                                            class="w-8 h-8 rounded bg-green-500/20 text-green-400 flex items-center justify-center text-lg mb-2">
                                            üé±</div>
                                        <div>
                                            <div class="font-bold text-white text-sm">Physics</div>
                                            <div class="text-[10px] text-gray-400 mt-1 leading-tight">Vector-based Bias
                                                Detection</div>
                                        </div>
                                        <div
                                            class="active-dot hidden absolute top-3 right-3 w-2 h-2 bg-green-500 rounded-full shadow-glow-green">
                                        </div>
                                    </button>

                                    <!-- Slot 4: Empty Placeholder -->
                                    <div
                                        class="p-4 rounded-xl bg-white/5 border border-dashed border-white/10 flex flex-col items-center justify-center text-center opacity-30">
                                        <div class="text-xl mb-1">‚è≥</div>
                                        <div
                                            class="text-[10px] font-bold text-gray-500 uppercase tracking-widest leading-tight">
                                            Next Model<br>Coming Soon</div>
                                    </div>
                                </div>
                            </div>

                            <!-- 2. EXISTING: Statistical Models -->
                            <div class="mb-8">
                                <h3 class="text-lg font-bold text-white flex items-center gap-2 mb-4">
                                    <span class="text-blue-400 text-2xl">üìä</span>
                                    Statistical Models
                                </h3>

                                <div class="grid grid-cols-2 gap-3">
                                    <!-- Card 1: Balanced -->
                                    <button onclick="selectModel('transformer'); playRipple(event)"
                                        id="card-transformer-stat"
                                        class="model-card p-4 rounded-xl bg-[#1e293b] border border-white/10 hover:border-blue-500 hover:bg-blue-500/10 transition-all text-left flex flex-col justify-between h-32 group relative overflow-hidden">
                                        <div
                                            class="w-8 h-8 rounded bg-blue-500/20 text-blue-400 flex items-center justify-center text-lg mb-2">
                                            ‚öñÔ∏è</div>
                                        <div>
                                            <div class="font-bold text-white text-sm">Balanced Mix</div>
                                            <div class="text-[10px] text-gray-500 leading-tight mt-1">Std. Deviation
                                                Focus</div>
                                        </div>
                                        <div
                                            class="active-dot hidden absolute top-3 right-3 w-2 h-2 bg-blue-500 rounded-full shadow-glow-cyan">
                                        </div>
                                    </button>

                                    <!-- Card 2: Hot Trend -->
                                    <button onclick="selectModel('hot_trend'); playRipple(event)" id="card-hot_trend"
                                        class="model-card p-4 rounded-xl bg-[#1e293b] border border-white/10 hover:border-purple-500 hover:bg-purple-500/10 transition-all text-left flex flex-col justify-between h-32 group relative overflow-hidden">
                                        <div
                                            class="w-8 h-8 rounded bg-purple-500/20 text-purple-400 flex items-center justify-center text-lg mb-2">
                                            ‚ö°</div>
                                        <div>
                                            <div class="font-bold text-white text-sm">Hot Trend</div>
                                            <div class="text-[10px] text-gray-500 leading-tight mt-1">Recent Frequency
                                            </div>
                                        </div>
                                        <div
                                            class="active-dot hidden absolute top-3 right-3 w-2 h-2 bg-purple-500 rounded-full shadow-glow-purple">
                                        </div>
                                    </button>

                                    <!-- Card 3: Cold Theory -->
                                    <button onclick="selectModel('vector');" id="card-cold-stat"
                                        class="model-card p-4 rounded-xl bg-[#1e293b] border border-white/10 hover:border-cyan-500 hover:bg-cyan-500/10 transition-all text-left flex flex-col justify-between h-32 group relative overflow-hidden">
                                        <div
                                            class="w-8 h-8 rounded bg-cyan-500/20 text-cyan-400 flex items-center justify-center text-lg mb-2">
                                            üßä</div>
                                        <div>
                                            <div class="font-bold text-white text-sm">Cold Theory</div>
                                            <div class="text-[10px] text-gray-500 leading-tight mt-1">Target Overdue
                                            </div>
                                        </div>
                                        <div
                                            class="active-dot hidden absolute top-3 right-3 w-2 h-2 bg-cyan-500 rounded-full shadow-glow-cyan">
                                        </div>
                                    </button>

                                    <!-- Card 4: Physics Bias -->
                                    <button onclick="selectModel('vector');" id="card-physics-stat"
                                        class="model-card p-4 rounded-xl bg-[#1e293b] border border-white/10 hover:border-green-500 hover:bg-green-500/10 transition-all text-left flex flex-col justify-between h-32 group relative overflow-hidden">
                                        <div
                                            class="w-8 h-8 rounded bg-green-500/20 text-green-400 flex items-center justify-center text-lg mb-2">
                                            üé±</div>
                                        <div>
                                            <div class="font-bold text-white text-sm">Physics Bias</div>
                                            <div class="text-[10px] text-gray-500 leading-tight mt-1">Mechanical
                                                Imperfections</div>
                                        </div>
                                        <div
                                            class="active-dot hidden absolute top-3 right-3 w-2 h-2 bg-green-500 rounded-full shadow-glow-green">
                                        </div>
                                    </button>
                                </div>
                            </div>

                            <!-- 3. Analysis Configuration -->
                            <div
                                class="mb-8 glass-panel p-5 bg-[#1e293b]/40 border border-white/5 rounded-2xl relative">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-xs font-bold text-gray-500 uppercase tracking-widest">Analysis
                                        Settings</h3>
                                    <button onclick="toggleAdvancedSettings()" id="settingsToggleBtn"
                                        class="p-1.5 rounded-lg hover:bg-white/5 text-gray-400 hover:text-blue-400 transition-all border border-transparent hover:border-white/10"
                                        title="Toggle Advanced Filters">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z">
                                            </path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </button>
                                </div>

                                <div class="space-y-4">
                                    <!-- Generation Count Row -->
                                    <div class="flex items-center justify-between">
                                        <div class="flex flex-col">
                                            <span class="text-sm font-medium text-gray-200">Generation Count</span>
                                            <span class="text-[10px] text-gray-500">Number of combinations to
                                                generate</span>
                                        </div>
                                        <div class="flex items-center bg-black/40 rounded-lg p-1 border border-white/5">
                                            <button onclick="adjustCount(-1)"
                                                class="w-8 h-8 flex items-center justify-center rounded-md hover:bg-white/5 text-gray-400 transition-colors">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor"
                                                    viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2" d="M20 12H4"></path>
                                                </svg>
                                            </button>
                                            <input type="number" id="countInput" value="5" readonly
                                                class="w-8 bg-transparent text-center text-sm font-bold text-white border-none focus:ring-0">
                                            <button onclick="adjustCount(1)"
                                                class="w-8 h-8 flex items-center justify-center rounded-md hover:bg-white/5 text-gray-400 transition-colors">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor"
                                                    viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2" d="M12 4v16m8-8H4"></path>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Advanced Filters Panel (Toggleable) -->
                                    <div id="advancedSettingsPanel"
                                        class="hidden pt-4 border-t border-white/5 space-y-4 relative bg-black/20 -mx-5 px-5 -mb-5 pb-5 rounded-b-2xl">
                                        <button onclick="toggleAdvancedSettings()"
                                            class="absolute top-4 right-5 text-gray-500 hover:text-red-400 transition-colors"
                                            title="Close Advanced Settings">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                    d="M6 18L18 6M6 6l12 12"></path>
                                            </svg>
                                        </button>

                                        <h4 class="text-[10px] font-bold text-blue-400 uppercase tracking-widest mb-1">
                                            Theoretical Filters</h4>

                                        <!-- AC Filter Row -->
                                        <div class="flex items-center justify-between group">
                                            <div class="flex flex-col">
                                                <span class="text-xs font-medium text-gray-200">AC Theory Filter</span>
                                                <span class="text-[10px] text-gray-500">Pattern complexity (AC ‚â•
                                                    7)</span>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer scale-90">
                                                <input type="checkbox" id="acFilter" class="sr-only peer" checked>
                                                <div
                                                    class="w-10 h-5 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600">
                                                </div>
                                            </label>
                                        </div>

                                        <!-- Sum Filter Row -->
                                        <div class="flex items-center justify-between group">
                                            <div class="flex flex-col">
                                                <span class="text-xs font-medium text-gray-200">Sum Range Filter</span>
                                                <span class="text-[10px] text-gray-500">Target balance (100 ~
                                                    175)</span>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer scale-90">
                                                <input type="checkbox" id="sumFilter" class="sr-only peer">
                                                <div
                                                    class="w-10 h-5 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-purple-600">
                                                </div>
                                            </label>
                                        </div>

                                        <!-- Consecutive Filter Row -->
                                        <div class="flex items-center justify-between group">
                                            <div class="flex flex-col">
                                                <span class="text-xs font-medium text-gray-200">Consecutive
                                                    Restriction</span>
                                                <span class="text-[10px] text-gray-500">Exclude 3+ sequences</span>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer scale-90">
                                                <input type="checkbox" id="consecutiveFilter" class="sr-only peer">
                                                <div
                                                    class="w-10 h-5 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-cyan-600">
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Start Button -->
                            <button id="generateBtn"
                                class="w-full py-4 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-bold text-lg shadow-lg shadow-blue-500/30 transition-all hover:scale-[1.02] flex items-center justify-center gap-3 active:scale-95">
                                <span class="text-xl">‚ñ∂</span>
                                Start Multi-Layer Analysis
                            </button>

                            <!-- Frequency Map (Mini) -->
                            <div class="glass-panel p-4 bg-[#1e293b]/30 border border-white/5 rounded-xl mt-4">
                                <h4 class="text-xs font-bold text-gray-400 mb-3">FREQUENCY MAP</h4>
                                <div id="frequencyBarChart" class="flex items-end gap-1 h-24 px-1">
                                    <!-- Bars injected via JS -->
                                    <div class="flex-1 bg-white/5 rounded-t h-[30%]"></div>
                                    <div class="flex-1 bg-white/5 rounded-t h-[50%]"></div>
                                    <div class="flex-1 bg-white/5 rounded-t h-[80%]"></div>
                                    <div class="flex-1 bg-white/5 rounded-t h-[40%]"></div>
                                    <div class="flex-1 bg-white/5 rounded-t h-[60%]"></div>
                                </div>
                            </div>
                        </div>

                        <!-- RIGHT COL: RESULTS (Span 8) -->
                        <div class="lg:col-span-7 xl:col-span-8">
                            <div
                                class="glass-panel h-full min-h-[600px] bg-[#0f172a] border border-white/5 rounded-3xl p-8 relative flex flex-col">
                                <!-- Background Placeholder -->
                                <div id="resultsPlaceholder"
                                    class="absolute inset-0 flex flex-col items-center justify-center text-center opacity-40 pointer-events-none">
                                    <div class="w-24 h-24 mb-6 text-gray-700">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
                                        </svg>
                                    </div>
                                    <h3 class="text-2xl font-bold text-gray-500 mb-2">Ready to Analyze</h3>
                                    <p class="text-gray-600 max-w-xs">Select a strategy on the left and initialize
                                        the
                                        Multi-AI Pipeline.</p>
                                </div>

                                <!-- Results Content -->
                                <div id="resultsArea" class="relative z-10 space-y-4"></div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- HISTORY VIEW (Hidden by default) -->
                <div id="view-history" class="hidden max-w-7xl mx-auto p-4 md:p-8">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                        <span>üìÇ</span> Generated History
                    </h2>
                    <div id="historyArea" class="space-y-4"></div>
                </div>

                <!-- SYSTEM SETTINGS VIEW (Focused on engine details) -->
                <div id="view-settings" class="hidden max-w-4xl mx-auto p-4 md:p-8">
                    <h2 class="text-2xl font-bold text-white mb-2 flex items-center gap-3">
                        <span>‚öôÔ∏è</span> System Configuration
                    </h2>
                    <p class="text-gray-500 mb-8 text-sm">AI Analysis Engine and Animation Settings</p>

                    <!-- Animation Selector -->
                    <div class="glass-panel p-6 bg-[#1e293b]/40 border border-white/10 rounded-3xl mb-6">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                            <span>üé¨</span> Animation Style
                        </h3>
                        <p class="text-gray-500 text-sm mb-4">Î≤àÌò∏ ÏÉùÏÑ± Ïãú ÌëúÏãúÎêòÎäî Ïï†ÎãàÎ©îÏù¥ÏÖòÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</p>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="animationSelector">
                            <!-- Lottery Ball -->
                            <div class="animation-option cursor-pointer p-4 rounded-xl border-2 border-purple-500 bg-purple-500/10 transition-all hover:scale-105"
                                data-type="lottery_ball" onclick="selectAnimation('lottery_ball')">
                                <div class="flex items-center gap-3 mb-2">
                                    <span class="text-3xl">üé±</span>
                                    <div>
                                        <h4 class="font-bold text-white">Î°úÎòêÎ≥º Ï∂îÏ≤®Í∏∞</h4>
                                        <p class="text-xs text-gray-400">Í≥µÏù¥ ÌäÄÎ©∞ ÎÇòÏò§Îäî Ïã§Ï†ú Ï∂îÏ≤® Ìö®Í≥º</p>
                                    </div>
                                </div>
                                <div class="selected-badge text-xs text-purple-400 font-medium">‚úì ÏÑ†ÌÉùÎê®</div>
                            </div>

                            <!-- Slot Machine -->
                            <div class="animation-option cursor-pointer p-4 rounded-xl border-2 border-gray-600 bg-gray-800/50 transition-all hover:scale-105 hover:border-purple-400"
                                data-type="slot_machine" onclick="selectAnimation('slot_machine')">
                                <div class="flex items-center gap-3 mb-2">
                                    <span class="text-3xl">üé∞</span>
                                    <div>
                                        <h4 class="font-bold text-white">Ïä¨Î°ØÎ®∏Ïã†</h4>
                                        <p class="text-xs text-gray-400">Ïπ¥ÏßÄÎÖ∏ Ïä§ÌÉÄÏùº Î¶¥ ÌöåÏ†Ñ</p>
                                    </div>
                                </div>
                                <div class="selected-badge hidden text-xs text-purple-400 font-medium">‚úì ÏÑ†ÌÉùÎê®</div>
                            </div>
                        </div>
                    </div>

                    <!-- Sound Toggle -->
                    <div class="glass-panel p-6 bg-[#1e293b]/40 border border-white/10 rounded-3xl">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                            <span>üîä</span> Sound Effects
                        </h3>
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-white">Ïï†ÎãàÎ©îÏù¥ÏÖò Ìö®Í≥ºÏùå</p>
                                <p class="text-gray-500 text-sm">Î≤àÌò∏ ÏÉùÏÑ± Ïãú ÏÇ¨Ïö¥Îìú Ìö®Í≥º Ïû¨ÏÉù</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="soundToggle" class="sr-only peer" checked
                                    onchange="toggleAnimationSound(this.checked)">
                                <div
                                    class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-500">
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- MOBILE BOTTOM NAVIGATION (Fixed) -->
    <nav
        class="md:hidden fixed bottom-0 left-0 w-full bg-[#1e293b]/90 backdrop-blur-xl border-t border-white/10 flex justify-around p-3 z-50 safe-area-bottom">
        <button onclick="switchTab('dashboard')" class="flex flex-col items-center gap-1 text-blue-400">
            <span class="text-xl">üìä</span>
            <span class="text-[10px] font-medium">Dash</span>
        </button>
        <button onclick="switchTab('history')" class="flex flex-col items-center gap-1 text-gray-500">
            <span class="text-xl">üõë</span>
            <span class="text-[10px] font-medium">History</span>
        </button>
        <button class="flex flex-col items-center gap-1 text-gray-500">
            <span class="text-xl">üë§</span>
            <span class="text-[10px] font-medium">My</span>
        </button>
    </nav>

    <!-- Animation Module -->
    <link rel="stylesheet" href="css/animation.css">
    <script src="js/animation.js"></script>

    <!-- Scripts (Using extracted UI logic + App Logic) -->
    <script src="js/app.js"></script>
    <script src="js/ui.js"></script>
    <!-- Inline UI Controller for New Layout -->
    <script>
        // Tab Switcher for New Layout
        function switchTab(tabId) {
            // Hide all views
            document.querySelectorAll('[id^="view-"]').forEach(el => el.classList.add('hidden'));

            // Show selected
            const view = document.getElementById(`view-${tabId}`);
            if (view) view.classList.remove('hidden');

            // Update Desktop Nav
            document.querySelectorAll('aside nav button').forEach(b => {
                b.className = "w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-400 hover:text-white hover:bg-white/5 transition-all";
            });
            const activeBtn = document.getElementById(`nav-${tabId}`);
            if (activeBtn) activeBtn.className = "w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-blue-600/10 text-blue-400 border border-blue-500/20 transition-all";

            // Trigger Loaders
            if (tabId === 'history' && typeof loadHistory === 'function') loadHistory();
        }

        // Toggle Advanced Settings UI
        function toggleAdvancedSettings() {
            const panel = document.getElementById('advancedSettingsPanel');
            const btn = document.getElementById('settingsToggleBtn');
            if (panel.classList.contains('hidden')) {
                panel.classList.remove('hidden');
                btn.classList.add('text-blue-400', 'bg-blue-500/10', 'border-blue-500/20');
            } else {
                panel.classList.add('hidden');
                btn.classList.remove('text-blue-400', 'bg-blue-500/10', 'border-blue-500/20');
            }
        }

        // Model Selection UI Handler
        const originalSelectModelUI = window.selectModel;
        window.selectModel = async function (model, isInit = false) {
            // Visual Update for Cards
            document.querySelectorAll('.model-card').forEach(el => {
                el.classList.remove('ring-2', 'ring-blue-500', 'bg-blue-900/20');
                el.classList.add('border-white/5');
            });

            const targetCard = document.getElementById(`card-${model}`);
            if (targetCard) {
                targetCard.classList.remove('border-white/5');
                targetCard.classList.add('ring-2', 'ring-blue-500', 'bg-blue-900/20');
            }

            // Call logic
            if (typeof appSelectModel === 'function') await appSelectModel(model, isInit);
            else if (typeof originalSelectModelUI === 'function') await originalSelectModelUI(model, isInit);
        }

        // Ripple Effect
        function playRipple(event) {
            const button = event.currentTarget;
            const circle = document.createElement("span");
            const diameter = Math.max(button.clientWidth, button.clientHeight);
            const radius = diameter / 2;
            circle.style.width = circle.style.height = `${diameter}px`;
            circle.style.left = `${event.clientX - button.offsetLeft - radius}px`;
            circle.style.top = `${event.clientY - button.offsetTop - radius}px`;
            circle.classList.add("ripple");
            const ripple = button.getElementsByClassName("ripple")[0];
            if (ripple) {
                ripple.remove();
            }
            button.appendChild(circle);
        }

        // Confidence Bar Animation Hook
        setInterval(() => {
            const valSpan = document.getElementById('confidenceValueDisplay');
            if (valSpan && valSpan.innerText !== '--') {
                const val = parseInt(valSpan.innerText);
                const bar = document.getElementById('confidenceBar');
                if (bar) bar.style.width = val + '%';
            }
        }, 1000);

        // ===== Animation Selector Functions =====
        function selectAnimation(type) {
            if (!window.animationManager) return;

            window.animationManager.setType(type);
            updateAnimationUI(type);
        }

        function updateAnimationUI(selectedType) {
            const options = document.querySelectorAll('.animation-option');
            options.forEach(opt => {
                const isSelected = opt.dataset.type === selectedType;
                const badge = opt.querySelector('.selected-badge');

                if (isSelected) {
                    opt.classList.remove('border-gray-600', 'bg-gray-800/50');
                    opt.classList.add('border-purple-500', 'bg-purple-500/10');
                    if (badge) badge.classList.remove('hidden');
                } else {
                    opt.classList.remove('border-purple-500', 'bg-purple-500/10');
                    opt.classList.add('border-gray-600', 'bg-gray-800/50');
                    if (badge) badge.classList.add('hidden');
                }
            });
        }

        function toggleAnimationSound(enabled) {
            if (window.animationManager) {
                window.animationManager.toggleSound(enabled);
            }
        }

        // Initialize animation UI on page load
        document.addEventListener('DOMContentLoaded', () => {
            if (window.animationManager) {
                const currentType = window.animationManager.getType();
                updateAnimationUI(currentType);

                const soundToggle = document.getElementById('soundToggle');
                if (soundToggle && window.animationManager.soundEnabled !== undefined) {
                    soundToggle.checked = window.animationManager.soundEnabled;
                }
            }
        });

    </script>
    <style>
        .ripple {
            position: absolute;
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s linear;
            background-color: rgba(255, 255, 255, 0.1);
        }

        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* Scrollbar Hide */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 3px;
        }
    </style>
</body>

</body>


</body>

</html>